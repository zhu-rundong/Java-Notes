# Nginx 概述



## Nginx 介绍

Nginx(engine x)  是由俄罗斯程序员 Igor Sysoev 开发的一个 **免费、开源、轻量级、高性能的 HTTP 服务器、Web 服务器和反向代理服务器**，以及 IMAP / POP3 代理服务器。

## 代理服务器概述

### 正向代理

代理服务器配置在客户端即为正向代理。

正向代理代替客户端发送请求，正向代理服务器和客户端对外表现为一个客户端，隐藏真实的客户端。主要功能有保护隐藏、翻墙、提速、缓存、授权等。

### 反向代理

代理服务器配置在服务器端即为反向代理。

反向代理方式是指以代理服务器来接受 internet 上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给 internet 上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。

反向代理代替服务端接受请求, 反向代理服务器和真实服务器对外表现为一个服务端, 隐藏真实的服务端。主要功能有保护隐藏、分布式路由、负载均衡、动静分离、数据缓存等。

## Nginx 应用场景

- Web 服务器
- 静态文件服务器
- 反向代理，负载均衡
- 虚拟主机
- 邮件服务器
- 图片实时压缩
- 安全防御
- 智能路由(企业级灰度测试)
- 灰度发布
- 防盗链（referer）

## Nginx 特点

1. 高并发

   一个 Nginx 服务器在不做任何配置的情况下并发量可达 1000 左右。在硬件条件允许的前提下，Nginx 可以支持高达 5-10 万的并发量（除了 Nginx 的设置外，Linux 主机需要做大量的设置来配合 Nginx）

2. 内存消耗少稳定性高

   Nginx 采取了分阶段资源分配技术，使得它的 CPU 与内存占用率非常低。

3. 单机高可用

   Nginx 使用单 master 多 worker 模式，实现单机 Nginx 高可用。

   Nginx 之所以可以实现高并发，是因为其具有很多工作进程 `worker`。当这些工作进程中的某些出现问题停止工作时，并不会影响整个系统的整体运行。因为其它 `worker` 会接替那些出问题的线程。

4. 模块化高扩展

   Nginx 很多功能都已经开发好并模块化，若需要哪些功能，只需要安装相应功能的扩展模块即可。根据编写扩展模块所使用的语言的不同，可以划分为两类 **：C 语言扩展模块与 LUA 脚本扩展模块**。

5. 高性能

   Nginx 采用了一些 OS 提供的最新特性。如 IO 多路复用事件驱动模型、零拷贝技术，以及对 sendfile (Linux2.2+)，accept-filter (FreeBSD4.1+)，TCP_DEFER_ACCEPT (Linux 2.4+)的支持，从而大大提高了性能。

6. 支持热部署

   Nginx 可以在 7*24 小时不间断服务的前提下，进行 Nginx 版本的平滑升级，Nginx 配置文件的平滑修改。

7. 成本低廉

   Nginx 为开源软件，采用的是 2-clause BSD-like 协议，可以免费试用，并且可用于商业用途。

8. 配置简单灵活

   配置信息通俗易懂，即使非专用系统管理员也能看懂。

9. 支持 Rewrite 重写

   Nginx 能够根据域名、URL 的不同，将 http 请求分到不同的后端服务器群组。

10. 内置健康检查功能

    如果 Nginx Proxy 后端的某台 Web 服务器宕机了，不会影响前端的访问。

11. 节省带宽

    支持 GZIP 压缩，可以添加浏览器本地缓存的 Header 头。



